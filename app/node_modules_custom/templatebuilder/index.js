
function TemplateBuilder(config) {	
	this.fs = require('fs');
	this.mustache = require('mustache');
	
	this.main = this.fs.readFileSync(config.appPath + '/views/layout/main.mustache').toString();
	this.header = this.fs.readFileSync(config.appPath + '/views/layout/header.mustache').toString();
	this.navbar = this.fs.readFileSync(config.appPath + '/views/layout/navbar.mustache').toString();	
}

TemplateBuilder.prototype = {
	
	view: function(viewPath, model) {

		var content = this.fs.readFileSync(viewPath);
		
		var html = this.mustache.render(this.main, model, {
			header: this.header,
			navbar: this.navbar,
			content: content.toString()
		});
		
		return html;
	}
};

module.exports = function (config) {	
	return new TemplateBuilder(config);
}